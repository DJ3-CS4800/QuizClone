<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login - QuizClone</title>
   <style>
       body { font-family: 'Arial', sans-serif; background-color: #f7f7f7; margin: 0; padding: 0; }
       .container {
           width: 400px;
           margin: 150px auto;
           background-color: black;
           padding: 30px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
           border-radius: 8px;
           text-align: center;
       }
       h1 {
           font-size: 36px;
           color: #6A0DAD; /* Purple color */
           margin: 0;
       }
       h2 {
           font-size: 24px;
           margin-top: 10px;
           color: #555;
       }
       .subtext {
           font-size: 14px;
           color: #777;
           margin-top: 10px;
       }
       input {
           width: 100%;
           padding: 12px;
           margin: 10px 0;
           border: 1px solid #ddd;
           border-radius: 4px;
           font-size: 16px;
       }
       button {
           width: 100%;
           padding: 12px;
           margin-top: 10px;
           border: none;
           border-radius: 4px;
           font-size: 16px;
           cursor: pointer;
       }
       .login-btn {
           background-color: #6A0DAD; /* Purple */
           color: white;
       }
       .register-btn {
           background-color: #28A745; /* Green */
           color: white;
       }
       .logo {
           width: 100px;
           height: auto;
           margin-bottom: 20px;
       }
       .error-message {
           color: red;
           margin-top: 10px;
       }
   </style>
</head>
<body>


   <div class="container">
       <!-- Logo and Subtext -->
       <img src="logo.png" alt="QuizClone Logo" class="logo">
       <h1>QuizClone</h1>
       <p class="subtext">Learn by playing with a deck of cards!</p>


       <!-- Login Form -->
       <h2>Login</h2>
       <input type="text" id="username" placeholder="Username">
       <input type="password" id="password" placeholder="Password">
       <button class="login-btn" onclick="login()">Login</button>
       <button class="register-btn" onclick="redirectToRegister()">Register</button>
       <p id="error-message" class="error-message"></p>
   </div>


   <script>
       // Function to handle login
       function login() {
           const username = document.getElementById("username").value;
           const password = document.getElementById("password").value;


           fetch('http://localhost:8080/api/auth/login', {
               method: 'POST',
               headers: {
                   'Content-Type': 'application/json'
               },
               body: JSON.stringify({ username: username, password: password }),
               credentials: 'include'
           })
           .then(response => {
               if (!response.ok) {
                   throw new Error('Failed to log in');
               }
               return response.json();
           })
           .then(data => {
               console.log(data);
               if (data.success) {
                   localStorage.setItem("user", username); // Save user info
                   window.location.href = "decks.html"; // Redirect to deck page
               } else {
                   document.getElementById("error-message").textContent = data.error;
               }
           })
           .catch(error => {
               console.error('Error:', error);
           });
       }


       // Redirect to the registration page
       function redirectToRegister() {
           window.location.href = "register.html"; // Change to your register page URL
       }
   </script>


</body>
</html>